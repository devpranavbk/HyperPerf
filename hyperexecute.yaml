version: 0.2
runson: linux
globalTimeout: 30

matrix:
    os: [linux]

task:
    name: artillery-load-test
    commands:
        # --- Pre ---
        - pip install -r requirements.txt
        - npm install -g artillery

        # --- Run ---
        - python extract_login_and_home_api_calls.py
        - python generate_artillery_yaml.py api_calls_login_and_home.json artillery.yml
        - artillery run artillery.yml -o artillery_report.json

        # --- Post ---
        - cat artillery_report.json