version: 0.1
runson: linux
globalTimeout: 30
matrix:
 os: [linux]
task:
 name: artillery-load-test
 commands:
    - sudo apt-get update
    - sudo apt-get install -y python3 python3-pip nodejs npm
    - pip install --no-cache-dir -r requirements.txt
    - npm install -g artillery
    - pip install playwright
    - playwright install chromium
    - echo "✅ Extracting APIs..."
    - python extract_login_and_home_api_calls.py
    - echo "✅ Generating Artillery script..."
    - python generate_artillery_yaml.py api_calls_login_and_home.json artillery.yml
    - echo "✅ Running Artillery load test..."
    - artillery run artillery.yml -o artillery_report.json
    - echo "✅ Test completed. Report below:"
    - cat artillery_report.json